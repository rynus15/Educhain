import { Component, Input, inject, signal, effect, computed, untracked, createComponent, booleanAttribute, input, contentChild, Injector, Renderer2, ApplicationRef, ChangeDetectionStrategy } from '@angular/core';
import { ScrollViewport, ViewportAdapter } from './viewport';
import { NgScrollbar } from './ng-scrollbar';
import { NgScrollbarCore } from './ng-scrollbar-core';
import { NG_SCROLLBAR } from './utils/scrollbar-base';
import { Scrollbars } from './scrollbars/scrollbars';
import * as i0 from "@angular/core";
export class NgScrollbarExt extends NgScrollbarCore {
    constructor() {
        effect((onCleanup) => {
            const viewportElement = this.viewportElement();
            const spacerElement = this.spacerElement();
            let contentWrapperElement = this.contentWrapperElement();
            const viewportError = this.viewportError();
            const contentWrapperError = this.contentWrapperError();
            const spacerError = this.spacerError();
            untracked(() => {
                if (!this.skipInit) {
                    const error = viewportError || contentWrapperError || spacerError;
                    if (error) {
                        console.error(error);
                    }
                    else {
                        // If no external spacer or content wrapper is provided, create a content wrapper element
                        if (!spacerElement && !contentWrapperElement) {
                            contentWrapperElement = this.renderer.createElement('div');
                            // Move all content of the viewport into the content wrapper
                            const childNodes = Array.from(viewportElement.childNodes);
                            childNodes.forEach((node) => this.renderer.appendChild(contentWrapperElement, node));
                            // Append the content wrapper to the viewport
                            this.renderer.appendChild(viewportElement, contentWrapperElement);
                        }
                        // Make sure content wrapper element is defined to proceed
                        if (contentWrapperElement) {
                            // Initialize viewport
                            this.viewport.init(viewportElement, contentWrapperElement, spacerElement);
                            // Attach scrollbars
                            this._attachScrollbars();
                        }
                    }
                }
                onCleanup(() => {
                    if (this._scrollbarsRef) {
                        this.appRef.detachView(this._scrollbarsRef.hostView);
                        this._scrollbarsRef.destroy();
                    }
                });
            });
        });
        super();
        this.renderer = inject(Renderer2);
        this.appRef = inject(ApplicationRef);
        this._scrollbars = signal(null);
        /**
         * Selector used to query the viewport element.
         */
        this.externalViewport = input();
        /**
         * Selector used to query the content wrapper element.
         */
        this.externalContentWrapper = input();
        /**
         * Selector used to query the spacer element (virtual scroll integration).
         * In the case of integrating the scrollbar with a virtual scroll component,
         * a spacer element is typically created to match the real size of the content.
         * The scrollbar will use the size of this spacer element for calculations instead of the content wrapper size.
         */
        this.externalSpacer = input();
        // At the time being, InputSignal value cannot be overridden programmatically from another directive,
        this.altViewport = signal(null);
        this.altContentWrapper = signal(null);
        this.altSpacer = signal(null);
        this.viewportElement = computed(() => {
            if (this.customViewport()) {
                return this.customViewport().nativeElement;
            }
            if (this.altViewport()) {
                return this.altViewport();
            }
            // If viewport selector was defined, query the element
            const selector = this.externalViewport();
            return selector ? this.nativeElement.querySelector(selector) : null;
        });
        this.viewportError = computed(() => {
            return !this.viewportElement()
                ? `[NgScrollbar]: Could not find the viewport element for the provided selector "${this.externalViewport()}"`
                : null;
        });
        this.contentWrapperElement = computed(() => {
            if (this.altContentWrapper()) {
                return this.altContentWrapper();
            }
            const selector = this.externalContentWrapper();
            return selector ? this.nativeElement.querySelector(selector) : null;
        });
        this.contentWrapperError = computed(() => {
            return !this.contentWrapperElement() && this.externalContentWrapper()
                ? `[NgScrollbar]: Content wrapper element not found for the provided selector "${this.externalContentWrapper()}"`
                : null;
        });
        this.spacerElement = computed(() => {
            if (this.altSpacer()) {
                return this.altSpacer();
            }
            const selector = this.externalSpacer();
            return selector ? this.nativeElement.querySelector(selector) : null;
        });
        this.spacerError = computed(() => {
            return !this.spacerElement() && this.externalSpacer()
                ? `[NgScrollbar]: Spacer element not found for the provided selector "${this.externalSpacer()}"`
                : null;
        });
        /**
         * Reference to the external viewport directive if used
         */
        this.customViewport = contentChild(ScrollViewport, { descendants: true });
    }
    _attachScrollbars() {
        // Create the scrollbars component
        this._scrollbarsRef = createComponent(Scrollbars, {
            environmentInjector: this.appRef.injector,
            elementInjector: Injector.create({ providers: [{ provide: NG_SCROLLBAR, useValue: this }] })
        });
        // Attach scrollbar to the content wrapper
        this.renderer.appendChild(this.viewport.contentWrapperElement, this._scrollbarsRef.location.nativeElement);
        // Attach the host view of the component to the main change detection tree, so that its lifecycle hooks run.
        this.appRef.attachView(this._scrollbarsRef.hostView);
        // Set the scrollbars instance
        this._scrollbars.set(this._scrollbarsRef.instance);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.11", ngImport: i0, type: NgScrollbarExt, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.2.0", version: "18.2.11", type: NgScrollbarExt, isStandalone: true, selector: "ng-scrollbar[externalViewport]", inputs: { externalViewport: { classPropertyName: "externalViewport", publicName: "externalViewport", isSignal: true, isRequired: false, transformFunction: null }, externalContentWrapper: { classPropertyName: "externalContentWrapper", publicName: "externalContentWrapper", isSignal: true, isRequired: false, transformFunction: null }, externalSpacer: { classPropertyName: "externalSpacer", publicName: "externalSpacer", isSignal: true, isRequired: false, transformFunction: null }, skipInit: { classPropertyName: "skipInit", publicName: "skipInit", isSignal: false, isRequired: false, transformFunction: booleanAttribute } }, host: { attributes: { "ngSkipHydration": "true" }, properties: { "class.ng-scrollbar-external-viewport": "true" } }, providers: [
            { provide: NG_SCROLLBAR, useExisting: NgScrollbarExt },
            { provide: NgScrollbarCore, useExisting: NgScrollbar },
            ViewportAdapter
        ], queries: [{ propertyName: "customViewport", first: true, predicate: ScrollViewport, descendants: true, isSignal: true }], exportAs: ["ngScrollbar"], usesInheritance: true, ngImport: i0, template: '<ng-content/>', isInline: true, styles: [":host{display:block;position:relative;max-height:100%;max-width:100%;--INTERNAL-scrollbar-border-radius: var(--scrollbar-border-radius, 0px);--INTERNAL-scrollbar-thickness: var(--scrollbar-thickness, 5);--INTERNAL-scrollbar-offset: var(--scrollbar-offset, 0);--INTERNAL-scrollbar-track-wrapper-transition: var(--scrollbar-track-wrapper-transition, width 60ms linear, height 60ms linear);--INTERNAL-scrollbar-track-color: var(--scrollbar-track-color, transparent);--INTERNAL-scrollbar-thumb-color: var(--scrollbar-thumb-color, rgb(0 0 0 / 20%));--INTERNAL-scrollbar-thumb-hover-color: var(--scrollbar-thumb-hover-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-hover-thickness: var(--scrollbar-hover-thickness, var(--INTERNAL-scrollbar-thickness));--INTERNAL-scrollbar-thumb-transition: var(--scrollbar-thumb-transition, none);--INTERNAL-scrollbar-thumb-min-size: var(--scrollbar-thumb-min-size, 20);--INTERNAL-scrollbar-button-color: var(--scrollbar-button-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-button-hover-color: var(--scrollbar-button-hover-color, var(--INTERNAL-scrollbar-button-color));--INTERNAL-scrollbar-button-active-color: var(--scrollbar-button-active-color, var(--INTERNAL-scrollbar-button-hover-color));--INTERNAL-scrollbar-button-fill: var(--scrollbar-button-fill, white);--INTERNAL-scrollbar-button-hover-fill: var(--scrollbar-button-hover-fill, var(--INTERNAL-scrollbar-button-fill));--INTERNAL-scrollbar-button-active-fill: var(--scrollbar-button-active-fill, var(--INTERNAL-scrollbar-button-hover-fill));--INTERNAL-scrollbar-hover-opacity-transition-enter-duration: var(--scrollbar-hover-opacity-transition-enter-duration, 0);--INTERNAL-scrollbar-hover-opacity-transition-leave-duration: var(--scrollbar-hover-opacity-transition-leave-duration, .4s);--INTERNAL-scrollbar-hover-opacity-transition-leave-delay: var(--scrollbar-hover-opacity-transition-leave-delay, 1s);--INTERNAL-scrollbar-overscroll-behavior: var(--scrollbar-overscroll-behavior, initial);--INTERNAL-scrollbar-mobile-overscroll-behavior: var(--scrollbar-mobile-overscroll-behavior, none);--_scrollbar-thickness: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 2);--_scrollbar-pointer-events: auto;--_scrollbar-offset-px: calc(var(--INTERNAL-scrollbar-offset) * 1px);--_scrollbar-thickness-px: calc(var(--INTERNAL-scrollbar-thickness) * 1px);--_scrollbar-hover-thickness-px: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_viewport-padding-top: 0;--_viewport-padding-bottom: 0;--_viewport-padding-left: 0;--_viewport-padding-right: 0;--_horizontal-thumb-display: block;--_vertical-thumb-display: block;--_viewport-overflow: auto;--_viewport-pointer-events: auto;--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-color);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-color);--_track-y-thickness: var(--_scrollbar-thickness-px);--_track-x-thickness: var(--_scrollbar-thickness-px);--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-overscroll-behavior);--_scrollbar-content-width: fit-content}:host{--_spacer-width: var(--spacer-width);--_spacer-height: var(--spacer-height);--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-offset-px);--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-offset-px);--_horizontal-top: initial;--_horizontal-bottom: var(--_scrollbar-offset-px);--_scrollbar-wrapper-x-top: calc(var(--viewport-height) - var(--_scrollbar-thickness));--reached-offset: 1px;--reached-offset-top: var(--reached-offset);--reached-offset-bottom: var(--reached-offset);--reached-offset-start: var(--reached-offset);--reached-offset-end: var(--reached-offset);--dropped-offset: 1px;--dropped-offset-top: var(--dropped-offset);--dropped-offset-bottom: var(--dropped-offset);--dropped-offset-start: var(--dropped-offset);--dropped-offset-end: var(--dropped-offset);--_viewport_scroll-timeline: unset;--_animation-timeline-y: unset;--_scrollbar-y-thumb-transform-to-value: unset;--_scrollbar-x-thumb-transform-to-value: unset;--_scrollbar-thumb-transform-from: unset;--_scrollbar-thumb-transform-to: unset}:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{min-height:100%;min-width:100%;height:100%;max-height:100%;max-width:100%}:host.ng-scroll-viewport,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{position:relative;overflow:var(--_viewport-overflow);scroll-timeline:var(--_viewport_scroll-timeline);box-sizing:border-box!important;-webkit-overflow-scrolling:touch;will-change:scroll-position;-webkit-user-select:var(--_viewport-user-select);user-select:var(--_viewport-user-select);overscroll-behavior:var(--_viewport-overscroll-behavior);pointer-events:var(--_viewport-pointer-events)}:host.ng-scroll-viewport>.ng-scroll-content,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport>.ng-scroll-content{width:var(--_scrollbar-content-width);z-index:1;min-width:100%;min-height:100%;contain:content;padding:var(--_viewport-padding-top, 0) var(--_viewport-padding-right, 0) var(--_viewport-padding-bottom, 0) var(--_viewport-padding-left, 0)}:host[appearance=native]{--_spacer-width: calc(var(--spacer-width) + var(--_scrollbar-thickness));--_spacer-height: calc(var(--spacer-height) + var(--_scrollbar-thickness))}:host.ng-scroll-viewport>.ng-scroll-spacer,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport>.ng-scroll-spacer{position:relative;width:calc(var(--_spacer-width) * 1px);height:calc(var(--_spacer-height) * 1px)}:host.ng-scroll-viewport,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{scrollbar-width:none!important}:host.ng-scroll-viewport::-webkit-scrollbar,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport::-webkit-scrollbar{display:none!important}:host[position=invertX],:host[position=invertAll]{--_horizontal-top: var(--_scrollbar-offset-px);--_horizontal-bottom: initial;--_scrollbar-wrapper-x-top: 0}:host[dir=ltr]{--_scrollbar-wrapper-y-right: initial;--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-left: calc(var(--viewport-width) - var(--_scrollbar-thickness))}:host[dir=ltr][position=invertY],:host[dir=ltr][position=invertAll]{--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-left: 0}:host[dir=rtl]{--_scrollbar-wrapper-y-left: initial;--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-right: calc(var(--viewport-width) - var(--_scrollbar-thickness))}:host[dir=rtl][position=invertY],:host[dir=rtl][position=invertAll]{--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-right: 0}:host[verticalUsed=true][horizontalUsed=true]{--_scrollbar-thickness-margin: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 3);--_scrollbar-thickness-margin-px: calc(var(--_scrollbar-thickness-margin) * 1px)}:host[horizontalUsed=true]{--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-thickness-margin-px)}:host[horizontalUsed=true][position=invertX],:host[horizontalUsed=true][position=invertAll]{--_vertical-top: var(--_scrollbar-thickness-margin-px);--_vertical-bottom: var(--_scrollbar-offset-px)}:host[verticalUsed=true][dir=ltr]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}:host[verticalUsed=true][dir=rtl]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}:host[verticalUsed=true][position=invertY][dir=ltr],:host[verticalUsed=true][position=invertAll][dir=ltr]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}:host[verticalUsed=true][position=invertY][dir=rtl],:host[verticalUsed=true][position=invertAll][dir=rtl]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}:host[appearance=native][verticalUsed=true][dir=ltr]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][verticalUsed=true][dir=rtl]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}:host[appearance=native][verticalUsed=true][position=invertY][dir=ltr],:host[appearance=native][verticalUsed=true][position=invertAll][dir=ltr]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}:host[appearance=native][verticalUsed=true][position=invertY][dir=rtl],:host[appearance=native][verticalUsed=true][position=invertAll][dir=rtl]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][horizontalUsed=true]{--_viewport-padding-top: 0;--_viewport-padding-bottom: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][horizontalUsed=true][position=invertX],:host[appearance=native][horizontalUsed=true][position=invertAll]{--_viewport-padding-top: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-bottom: 0}:host[visibility=hover]{--_scrollbar-hover-opacity: 0;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-leave-duration) var(--INTERNAL-scrollbar-hover-opacity-transition-leave-delay)}:host[visibility=hover]:hover,:host[visibility=hover]:active,:host[visibility=hover]:focus{--_scrollbar-hover-opacity: 1;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-enter-duration)}:host[dir=ltr] ::ng-deep .scroll-reached-trigger-element[trigger=start],:host[dir=ltr] ::ng-deep .scroll-dropped-trigger-element[trigger=start]{left:0;right:unset}:host[dir=ltr] ::ng-deep .scroll-reached-trigger-element[trigger=end],:host[dir=ltr] ::ng-deep .scroll-dropped-trigger-element[trigger=end]{right:0;left:unset}:host[dir=rtl] ::ng-deep .scroll-reached-trigger-element[trigger=start],:host[dir=rtl] ::ng-deep .scroll-dropped-trigger-element[trigger=start]{right:0;left:unset}:host[dir=rtl] ::ng-deep .scroll-reached-trigger-element[trigger=end],:host[dir=rtl] ::ng-deep .scroll-dropped-trigger-element[trigger=end]{left:0;right:unset}:host ::ng-deep .ng-scroll-reached-wrapper,:host ::ng-deep .ng-scroll-dropped-wrapper,:host ::ng-deep .scroll-reached-trigger-element,:host ::ng-deep .scroll-dropped-trigger-element{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;z-index:-9999}:host ::ng-deep .ng-scroll-reached-wrapper,:host ::ng-deep .ng-scroll-dropped-wrapper{visibility:hidden;inset:0;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}:host ::ng-deep [isHorizontallyScrollable=false] .scroll-reached-trigger-element[trigger=end],:host ::ng-deep [isHorizontallyScrollable=false] .scroll-dropped-trigger-element[trigger=end]{display:none}:host ::ng-deep [isVerticallyScrollable=false] .scroll-reached-trigger-element[trigger=bottom],:host ::ng-deep [isVerticallyScrollable=false] .scroll-dropped-trigger-element[trigger=bottom]{display:none}:host ::ng-deep .scroll-reached-trigger-element{background:red}:host ::ng-deep .scroll-reached-trigger-element[trigger=top],:host ::ng-deep .scroll-reached-trigger-element[trigger=bottom]{left:0;right:0}:host ::ng-deep .scroll-reached-trigger-element[trigger=start],:host ::ng-deep .scroll-reached-trigger-element[trigger=end]{top:0;bottom:0}:host ::ng-deep .scroll-reached-trigger-element[trigger=top]{top:0;height:var(--reached-offset-top)}:host ::ng-deep .scroll-reached-trigger-element[trigger=bottom]{bottom:0;height:var(--reached-offset-bottom)}:host ::ng-deep .scroll-reached-trigger-element[trigger=start]{width:var(--reached-offset-start)}:host ::ng-deep .scroll-reached-trigger-element[trigger=end]{width:var(--reached-offset-end)}:host .scroll-dropped-trigger-element{background:#00f}:host .scroll-dropped-trigger-element[trigger=top],:host .scroll-dropped-trigger-element[trigger=bottom]{left:0;right:0}:host .scroll-dropped-trigger-element[trigger=start],:host .scroll-dropped-trigger-element[trigger=end]{top:0;bottom:0}:host .scroll-dropped-trigger-element[trigger=top]{top:0;height:var(--dropped-offset-top)}:host .scroll-dropped-trigger-element[trigger=bottom]{bottom:0;height:var(--dropped-offset-bottom)}:host .scroll-dropped-trigger-element[trigger=start]{width:var(--dropped-offset-start)}:host .scroll-dropped-trigger-element[trigger=end]{width:var(--dropped-offset-end)}:host[verticalUsed=true]{--_timeline-scope: --scrollerY;--_animation-timeline-y: --scrollerY;--_viewport_scroll-timeline: --scrollerY y}:host[horizontalUsed=true]{--_timeline-scope: --scrollerX;--_animation-timeline-x: --scrollerX;--_viewport_scroll-timeline: --scrollerX x}:host[verticalUsed=true][horizontalUsed=true]{--_timeline-scope: --scrollerX, --scrollerY;--_viewport_scroll-timeline: --scrollerX x, --scrollerY y}:host[orientation=vertical]{--_viewport-overflow: hidden auto;--_scrollbar-content-width: unset}:host[orientation=horizontal]{--_viewport-overflow: auto hidden}:host[disableInteraction=true]{--_viewport-pointer-events: none;--_scrollbar-pointer-events: none}:host[isVerticallyScrollable=false]{--_vertical-thumb-display: none}:host[isHorizontallyScrollable=false]{--_horizontal-thumb-display: none}:host[dragging=x],:host[dragging=y]{--_viewport-user-select: none}:host[dragging=x]{--_track-x-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-x-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}:host[dragging=y]{--_track-y-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-y-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}:host[mobile=true]{--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-mobile-overscroll-behavior)}\n"], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.11", ngImport: i0, type: NgScrollbarExt, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'ng-scrollbar[externalViewport]', exportAs: 'ngScrollbar', template: '<ng-content/>', changeDetection: ChangeDetectionStrategy.OnPush, host: {
                        // This component appends a content wrapper element to the viewport
                        // A hydration mismatch error will be thrown (NG0500) during DOM manipulation.
                        // To avoid this error, the 'ngSkipHydration' attribute is added to skip hydration.
                        ngSkipHydration: 'true',
                        '[class.ng-scrollbar-external-viewport]': 'true'
                    }, providers: [
                        { provide: NG_SCROLLBAR, useExisting: NgScrollbarExt },
                        { provide: NgScrollbarCore, useExisting: NgScrollbar },
                        ViewportAdapter
                    ], styles: [":host{display:block;position:relative;max-height:100%;max-width:100%;--INTERNAL-scrollbar-border-radius: var(--scrollbar-border-radius, 0px);--INTERNAL-scrollbar-thickness: var(--scrollbar-thickness, 5);--INTERNAL-scrollbar-offset: var(--scrollbar-offset, 0);--INTERNAL-scrollbar-track-wrapper-transition: var(--scrollbar-track-wrapper-transition, width 60ms linear, height 60ms linear);--INTERNAL-scrollbar-track-color: var(--scrollbar-track-color, transparent);--INTERNAL-scrollbar-thumb-color: var(--scrollbar-thumb-color, rgb(0 0 0 / 20%));--INTERNAL-scrollbar-thumb-hover-color: var(--scrollbar-thumb-hover-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-hover-thickness: var(--scrollbar-hover-thickness, var(--INTERNAL-scrollbar-thickness));--INTERNAL-scrollbar-thumb-transition: var(--scrollbar-thumb-transition, none);--INTERNAL-scrollbar-thumb-min-size: var(--scrollbar-thumb-min-size, 20);--INTERNAL-scrollbar-button-color: var(--scrollbar-button-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-button-hover-color: var(--scrollbar-button-hover-color, var(--INTERNAL-scrollbar-button-color));--INTERNAL-scrollbar-button-active-color: var(--scrollbar-button-active-color, var(--INTERNAL-scrollbar-button-hover-color));--INTERNAL-scrollbar-button-fill: var(--scrollbar-button-fill, white);--INTERNAL-scrollbar-button-hover-fill: var(--scrollbar-button-hover-fill, var(--INTERNAL-scrollbar-button-fill));--INTERNAL-scrollbar-button-active-fill: var(--scrollbar-button-active-fill, var(--INTERNAL-scrollbar-button-hover-fill));--INTERNAL-scrollbar-hover-opacity-transition-enter-duration: var(--scrollbar-hover-opacity-transition-enter-duration, 0);--INTERNAL-scrollbar-hover-opacity-transition-leave-duration: var(--scrollbar-hover-opacity-transition-leave-duration, .4s);--INTERNAL-scrollbar-hover-opacity-transition-leave-delay: var(--scrollbar-hover-opacity-transition-leave-delay, 1s);--INTERNAL-scrollbar-overscroll-behavior: var(--scrollbar-overscroll-behavior, initial);--INTERNAL-scrollbar-mobile-overscroll-behavior: var(--scrollbar-mobile-overscroll-behavior, none);--_scrollbar-thickness: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 2);--_scrollbar-pointer-events: auto;--_scrollbar-offset-px: calc(var(--INTERNAL-scrollbar-offset) * 1px);--_scrollbar-thickness-px: calc(var(--INTERNAL-scrollbar-thickness) * 1px);--_scrollbar-hover-thickness-px: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_viewport-padding-top: 0;--_viewport-padding-bottom: 0;--_viewport-padding-left: 0;--_viewport-padding-right: 0;--_horizontal-thumb-display: block;--_vertical-thumb-display: block;--_viewport-overflow: auto;--_viewport-pointer-events: auto;--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-color);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-color);--_track-y-thickness: var(--_scrollbar-thickness-px);--_track-x-thickness: var(--_scrollbar-thickness-px);--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-overscroll-behavior);--_scrollbar-content-width: fit-content}:host{--_spacer-width: var(--spacer-width);--_spacer-height: var(--spacer-height);--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-offset-px);--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-offset-px);--_horizontal-top: initial;--_horizontal-bottom: var(--_scrollbar-offset-px);--_scrollbar-wrapper-x-top: calc(var(--viewport-height) - var(--_scrollbar-thickness));--reached-offset: 1px;--reached-offset-top: var(--reached-offset);--reached-offset-bottom: var(--reached-offset);--reached-offset-start: var(--reached-offset);--reached-offset-end: var(--reached-offset);--dropped-offset: 1px;--dropped-offset-top: var(--dropped-offset);--dropped-offset-bottom: var(--dropped-offset);--dropped-offset-start: var(--dropped-offset);--dropped-offset-end: var(--dropped-offset);--_viewport_scroll-timeline: unset;--_animation-timeline-y: unset;--_scrollbar-y-thumb-transform-to-value: unset;--_scrollbar-x-thumb-transform-to-value: unset;--_scrollbar-thumb-transform-from: unset;--_scrollbar-thumb-transform-to: unset}:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{min-height:100%;min-width:100%;height:100%;max-height:100%;max-width:100%}:host.ng-scroll-viewport,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{position:relative;overflow:var(--_viewport-overflow);scroll-timeline:var(--_viewport_scroll-timeline);box-sizing:border-box!important;-webkit-overflow-scrolling:touch;will-change:scroll-position;-webkit-user-select:var(--_viewport-user-select);user-select:var(--_viewport-user-select);overscroll-behavior:var(--_viewport-overscroll-behavior);pointer-events:var(--_viewport-pointer-events)}:host.ng-scroll-viewport>.ng-scroll-content,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport>.ng-scroll-content{width:var(--_scrollbar-content-width);z-index:1;min-width:100%;min-height:100%;contain:content;padding:var(--_viewport-padding-top, 0) var(--_viewport-padding-right, 0) var(--_viewport-padding-bottom, 0) var(--_viewport-padding-left, 0)}:host[appearance=native]{--_spacer-width: calc(var(--spacer-width) + var(--_scrollbar-thickness));--_spacer-height: calc(var(--spacer-height) + var(--_scrollbar-thickness))}:host.ng-scroll-viewport>.ng-scroll-spacer,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport>.ng-scroll-spacer{position:relative;width:calc(var(--_spacer-width) * 1px);height:calc(var(--_spacer-height) * 1px)}:host.ng-scroll-viewport,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport{scrollbar-width:none!important}:host.ng-scroll-viewport::-webkit-scrollbar,:host.ng-scrollbar-external-viewport ::ng-deep .ng-scroll-viewport::-webkit-scrollbar{display:none!important}:host[position=invertX],:host[position=invertAll]{--_horizontal-top: var(--_scrollbar-offset-px);--_horizontal-bottom: initial;--_scrollbar-wrapper-x-top: 0}:host[dir=ltr]{--_scrollbar-wrapper-y-right: initial;--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-left: calc(var(--viewport-width) - var(--_scrollbar-thickness))}:host[dir=ltr][position=invertY],:host[dir=ltr][position=invertAll]{--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-left: 0}:host[dir=rtl]{--_scrollbar-wrapper-y-left: initial;--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-right: calc(var(--viewport-width) - var(--_scrollbar-thickness))}:host[dir=rtl][position=invertY],:host[dir=rtl][position=invertAll]{--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-right: 0}:host[verticalUsed=true][horizontalUsed=true]{--_scrollbar-thickness-margin: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 3);--_scrollbar-thickness-margin-px: calc(var(--_scrollbar-thickness-margin) * 1px)}:host[horizontalUsed=true]{--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-thickness-margin-px)}:host[horizontalUsed=true][position=invertX],:host[horizontalUsed=true][position=invertAll]{--_vertical-top: var(--_scrollbar-thickness-margin-px);--_vertical-bottom: var(--_scrollbar-offset-px)}:host[verticalUsed=true][dir=ltr]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}:host[verticalUsed=true][dir=rtl]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}:host[verticalUsed=true][position=invertY][dir=ltr],:host[verticalUsed=true][position=invertAll][dir=ltr]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}:host[verticalUsed=true][position=invertY][dir=rtl],:host[verticalUsed=true][position=invertAll][dir=rtl]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}:host[appearance=native][verticalUsed=true][dir=ltr]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][verticalUsed=true][dir=rtl]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}:host[appearance=native][verticalUsed=true][position=invertY][dir=ltr],:host[appearance=native][verticalUsed=true][position=invertAll][dir=ltr]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}:host[appearance=native][verticalUsed=true][position=invertY][dir=rtl],:host[appearance=native][verticalUsed=true][position=invertAll][dir=rtl]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][horizontalUsed=true]{--_viewport-padding-top: 0;--_viewport-padding-bottom: calc(var(--_scrollbar-thickness) * 1px)}:host[appearance=native][horizontalUsed=true][position=invertX],:host[appearance=native][horizontalUsed=true][position=invertAll]{--_viewport-padding-top: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-bottom: 0}:host[visibility=hover]{--_scrollbar-hover-opacity: 0;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-leave-duration) var(--INTERNAL-scrollbar-hover-opacity-transition-leave-delay)}:host[visibility=hover]:hover,:host[visibility=hover]:active,:host[visibility=hover]:focus{--_scrollbar-hover-opacity: 1;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-enter-duration)}:host[dir=ltr] ::ng-deep .scroll-reached-trigger-element[trigger=start],:host[dir=ltr] ::ng-deep .scroll-dropped-trigger-element[trigger=start]{left:0;right:unset}:host[dir=ltr] ::ng-deep .scroll-reached-trigger-element[trigger=end],:host[dir=ltr] ::ng-deep .scroll-dropped-trigger-element[trigger=end]{right:0;left:unset}:host[dir=rtl] ::ng-deep .scroll-reached-trigger-element[trigger=start],:host[dir=rtl] ::ng-deep .scroll-dropped-trigger-element[trigger=start]{right:0;left:unset}:host[dir=rtl] ::ng-deep .scroll-reached-trigger-element[trigger=end],:host[dir=rtl] ::ng-deep .scroll-dropped-trigger-element[trigger=end]{left:0;right:unset}:host ::ng-deep .ng-scroll-reached-wrapper,:host ::ng-deep .ng-scroll-dropped-wrapper,:host ::ng-deep .scroll-reached-trigger-element,:host ::ng-deep .scroll-dropped-trigger-element{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;z-index:-9999}:host ::ng-deep .ng-scroll-reached-wrapper,:host ::ng-deep .ng-scroll-dropped-wrapper{visibility:hidden;inset:0;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}:host ::ng-deep [isHorizontallyScrollable=false] .scroll-reached-trigger-element[trigger=end],:host ::ng-deep [isHorizontallyScrollable=false] .scroll-dropped-trigger-element[trigger=end]{display:none}:host ::ng-deep [isVerticallyScrollable=false] .scroll-reached-trigger-element[trigger=bottom],:host ::ng-deep [isVerticallyScrollable=false] .scroll-dropped-trigger-element[trigger=bottom]{display:none}:host ::ng-deep .scroll-reached-trigger-element{background:red}:host ::ng-deep .scroll-reached-trigger-element[trigger=top],:host ::ng-deep .scroll-reached-trigger-element[trigger=bottom]{left:0;right:0}:host ::ng-deep .scroll-reached-trigger-element[trigger=start],:host ::ng-deep .scroll-reached-trigger-element[trigger=end]{top:0;bottom:0}:host ::ng-deep .scroll-reached-trigger-element[trigger=top]{top:0;height:var(--reached-offset-top)}:host ::ng-deep .scroll-reached-trigger-element[trigger=bottom]{bottom:0;height:var(--reached-offset-bottom)}:host ::ng-deep .scroll-reached-trigger-element[trigger=start]{width:var(--reached-offset-start)}:host ::ng-deep .scroll-reached-trigger-element[trigger=end]{width:var(--reached-offset-end)}:host .scroll-dropped-trigger-element{background:#00f}:host .scroll-dropped-trigger-element[trigger=top],:host .scroll-dropped-trigger-element[trigger=bottom]{left:0;right:0}:host .scroll-dropped-trigger-element[trigger=start],:host .scroll-dropped-trigger-element[trigger=end]{top:0;bottom:0}:host .scroll-dropped-trigger-element[trigger=top]{top:0;height:var(--dropped-offset-top)}:host .scroll-dropped-trigger-element[trigger=bottom]{bottom:0;height:var(--dropped-offset-bottom)}:host .scroll-dropped-trigger-element[trigger=start]{width:var(--dropped-offset-start)}:host .scroll-dropped-trigger-element[trigger=end]{width:var(--dropped-offset-end)}:host[verticalUsed=true]{--_timeline-scope: --scrollerY;--_animation-timeline-y: --scrollerY;--_viewport_scroll-timeline: --scrollerY y}:host[horizontalUsed=true]{--_timeline-scope: --scrollerX;--_animation-timeline-x: --scrollerX;--_viewport_scroll-timeline: --scrollerX x}:host[verticalUsed=true][horizontalUsed=true]{--_timeline-scope: --scrollerX, --scrollerY;--_viewport_scroll-timeline: --scrollerX x, --scrollerY y}:host[orientation=vertical]{--_viewport-overflow: hidden auto;--_scrollbar-content-width: unset}:host[orientation=horizontal]{--_viewport-overflow: auto hidden}:host[disableInteraction=true]{--_viewport-pointer-events: none;--_scrollbar-pointer-events: none}:host[isVerticallyScrollable=false]{--_vertical-thumb-display: none}:host[isHorizontallyScrollable=false]{--_horizontal-thumb-display: none}:host[dragging=x],:host[dragging=y]{--_viewport-user-select: none}:host[dragging=x]{--_track-x-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-x-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}:host[dragging=y]{--_track-y-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-y-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}:host[mobile=true]{--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-mobile-overscroll-behavior)}\n"] }]
        }], ctorParameters: () => [], propDecorators: { skipInit: [{
                type: Input,
                args: [{ transform: booleanAttribute }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLWV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zY3JvbGxiYXIvc3JjL2xpYi9uZy1zY3JvbGxiYXItZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixNQUFNLEVBQ04sTUFBTSxFQUNOLFFBQVEsRUFDUixTQUFTLEVBQ1QsZUFBZSxFQUNmLGdCQUFnQixFQUNoQixLQUFLLEVBQ0wsWUFBWSxFQUlaLFFBQVEsRUFDUixTQUFTLEVBRVQsY0FBYyxFQUNkLHVCQUF1QixFQUV4QixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsY0FBYyxFQUFFLGVBQWUsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUM3RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0seUJBQXlCLENBQUM7O0FBc0JyRCxNQUFNLE9BQU8sY0FBZSxTQUFRLGVBQWU7SUEwRmpEO1FBQ0UsTUFBTSxDQUFDLENBQUMsU0FBa0MsRUFBRSxFQUFFO1lBQzVDLE1BQU0sZUFBZSxHQUFnQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDNUQsTUFBTSxhQUFhLEdBQWdCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN4RCxJQUFJLHFCQUFxQixHQUFnQixJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztZQUV0RSxNQUFNLGFBQWEsR0FBVyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDbkQsTUFBTSxtQkFBbUIsR0FBVyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUMvRCxNQUFNLFdBQVcs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Q0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JELDhCQUE4QjtRQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JELENBQUM7K0dBdkpVLGNBQWM7bUdBQWQsY0FBYyw2cEJBbUZMLGdCQUFnQixzSUF6RnpCO1lBQ1QsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUU7WUFDdEQsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUU7WUFDdEQsZUFBZTtTQUNoQixzRUEwRnFELGNBQWMsa0hBeEcxRCxlQUFlOzs0RkFnQmQsY0FBYztrQkFwQjFCLFNBQVM7aUNBQ0ksSUFBSSxZQUNOLGdDQUFnQyxZQUNoQyxhQUFhLFlBQ2IsZUFBZSxtQkFFUix1QkFBdUIsQ0FBQyxNQUFNLFFBQ3pDO3dCQUNKLG1FQUFtRTt3QkFDbkUsOEVBQThFO3dCQUM5RSxtRkFBbUY7d0JBQ25GLGVBQWUsRUFBRSxNQUFNO3dCQUN2Qix3Q0FBd0MsRUFBRSxNQUFNO3FCQUNqRCxhQUNVO3dCQUNULEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxXQUFXLGdCQUFnQixFQUFFO3dCQUN0RCxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRTt3QkFDdEQsZUFBZTtxQkFDaEI7d0RBcUZ1QyxRQUFRO3NCQUEvQyxLQUFLO3VCQUFDLEVBQUUsU0FBUyxFQUFFLGdCQUFnQixFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgSW5wdXQsXHJcbiAgaW5qZWN0LFxyXG4gIHNpZ25hbCxcclxuICBlZmZlY3QsXHJcbiAgY29tcHV0ZWQsXHJcbiAgdW50cmFja2VkLFxyXG4gIGNyZWF0ZUNvbXBvbmVudCxcclxuICBib29sZWFuQXR0cmlidXRlLFxyXG4gIGlucHV0LFxyXG4gIGNvbnRlbnRDaGlsZCxcclxuICBTaWduYWwsXHJcbiAgSW5wdXRTaWduYWwsXHJcbiAgV3JpdGFibGVTaWduYWwsXHJcbiAgSW5qZWN0b3IsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIENvbXBvbmVudFJlZixcclxuICBBcHBsaWNhdGlvblJlZixcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBFZmZlY3RDbGVhbnVwUmVnaXN0ZXJGblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBTY3JvbGxWaWV3cG9ydCwgVmlld3BvcnRBZGFwdGVyIH0gZnJvbSAnLi92aWV3cG9ydCc7XHJcbmltcG9ydCB7IE5nU2Nyb2xsYmFyIH0gZnJvbSAnLi9uZy1zY3JvbGxiYXInO1xyXG5pbXBvcnQgeyBOZ1Njcm9sbGJhckNvcmUgfSBmcm9tICcuL25nLXNjcm9sbGJhci1jb3JlJztcclxuaW1wb3J0IHsgTkdfU0NST0xMQkFSIH0gZnJvbSAnLi91dGlscy9zY3JvbGxiYXItYmFzZSc7XHJcbmltcG9ydCB7IFNjcm9sbGJhcnMgfSBmcm9tICcuL3Njcm9sbGJhcnMvc2Nyb2xsYmFycyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIHNlbGVjdG9yOiAnbmctc2Nyb2xsYmFyW2V4dGVybmFsVmlld3BvcnRdJyxcclxuICBleHBvcnRBczogJ25nU2Nyb2xsYmFyJyxcclxuICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50Lz4nLFxyXG4gIHN0eWxlVXJsczogWyduZy1zY3JvbGxiYXIuc2NzcyddLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxyXG4gIGhvc3Q6IHtcclxuICAgIC8vIFRoaXMgY29tcG9uZW50IGFwcGVuZHMgYSBjb250ZW50IHdyYXBwZXIgZWxlbWVudCB0byB0aGUgdmlld3BvcnRcclxuICAgIC8vIEEgaHlkcmF0aW9uIG1pc21hdGNoIGVycm9yIHdpbGwgYmUgdGhyb3duIChORzA1MDApIGR1cmluZyBET00gbWFuaXB1bGF0aW9uLlxyXG4gICAgLy8gVG8gYXZvaWQgdGhpcyBlcnJvciwgdGhlICduZ1NraXBIeWRyYXRpb24nIGF0dHJpYnV0ZSBpcyBhZGRlZCB0byBza2lwIGh5ZHJhdGlvbi5cclxuICAgIG5nU2tpcEh5ZHJhdGlvbjogJ3RydWUnLFxyXG4gICAgJ1tjbGFzcy5uZy1zY3JvbGxiYXItZXh0ZXJuYWwtdmlld3BvcnRdJzogJ3RydWUnXHJcbiAgfSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHsgcHJvdmlkZTogTkdfU0NST0xMQkFSLCB1c2VFeGlzdGluZzogTmdTY3JvbGxiYXJFeHQgfSxcclxuICAgIHsgcHJvdmlkZTogTmdTY3JvbGxiYXJDb3JlLCB1c2VFeGlzdGluZzogTmdTY3JvbGxiYXIgfSxcclxuICAgIFZpZXdwb3J0QWRhcHRlclxyXG4gIF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhckV4dCBleHRlbmRzIE5nU2Nyb2xsYmFyQ29yZSB7XHJcblxyXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXI6IFJlbmRlcmVyMiA9IGluamVjdChSZW5kZXJlcjIpO1xyXG5cclxuICBwcml2YXRlIHJlYWRvbmx5IGFwcFJlZjogQXBwbGljYXRpb25SZWYgPSBpbmplY3QoQXBwbGljYXRpb25SZWYpO1xyXG5cclxuICBfc2Nyb2xsYmFyc1JlZjogQ29tcG9uZW50UmVmPFNjcm9sbGJhcnM+O1xyXG5cclxuICBfc2Nyb2xsYmFyczogV3JpdGFibGVTaWduYWw8U2Nyb2xsYmFycz4gPSBzaWduYWw8U2Nyb2xsYmFycz4obnVsbCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbGVjdG9yIHVzZWQgdG8gcXVlcnkgdGhlIHZpZXdwb3J0IGVsZW1lbnQuXHJcbiAgICovXHJcbiAgZXh0ZXJuYWxWaWV3cG9ydDogSW5wdXRTaWduYWw8c3RyaW5nPiA9IGlucHV0PHN0cmluZz4oKTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0b3IgdXNlZCB0byBxdWVyeSB0aGUgY29udGVudCB3cmFwcGVyIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgZXh0ZXJuYWxDb250ZW50V3JhcHBlcjogSW5wdXRTaWduYWw8c3RyaW5nPiA9IGlucHV0PHN0cmluZz4oKTtcclxuXHJcbiAgLyoqXHJcbiAgICogU2VsZWN0b3IgdXNlZCB0byBxdWVyeSB0aGUgc3BhY2VyIGVsZW1lbnQgKHZpcnR1YWwgc2Nyb2xsIGludGVncmF0aW9uKS5cclxuICAgKiBJbiB0aGUgY2FzZSBvZiBpbnRlZ3JhdGluZyB0aGUgc2Nyb2xsYmFyIHdpdGggYSB2aXJ0dWFsIHNjcm9sbCBjb21wb25lbnQsXHJcbiAgICogYSBzcGFjZXIgZWxlbWVudCBpcyB0eXBpY2FsbHkgY3JlYXRlZCB0byBtYXRjaCB0aGUgcmVhbCBzaXplIG9mIHRoZSBjb250ZW50LlxyXG4gICAqIFRoZSBzY3JvbGxiYXIgd2lsbCB1c2UgdGhlIHNpemUgb2YgdGhpcyBzcGFjZXIgZWxlbWVudCBmb3IgY2FsY3VsYXRpb25zIGluc3RlYWQgb2YgdGhlIGNvbnRlbnQgd3JhcHBlciBzaXplLlxyXG4gICAqL1xyXG4gIGV4dGVybmFsU3BhY2VyOiBJbnB1dFNpZ25hbDxzdHJpbmc+ID0gaW5wdXQ8c3RyaW5nPigpO1xyXG5cclxuICAvLyBBdCB0aGUgdGltZSBiZWluZywgSW5wdXRTaWduYWwgdmFsdWUgY2Fubm90IGJlIG92ZXJyaWRkZW4gcHJvZ3JhbW1hdGljYWxseSBmcm9tIGFub3RoZXIgZGlyZWN0aXZlLFxyXG4gIGFsdFZpZXdwb3J0OiBXcml0YWJsZVNpZ25hbDxIVE1MRWxlbWVudD4gPSBzaWduYWw8SFRNTEVsZW1lbnQ+KG51bGwpO1xyXG4gIGFsdENvbnRlbnRXcmFwcGVyOiBXcml0YWJsZVNpZ25hbDxIVE1MRWxlbWVudD4gPSBzaWduYWw8SFRNTEVsZW1lbnQ+KG51bGwpO1xyXG4gIGFsdFNwYWNlcjogV3JpdGFibGVTaWduYWw8SFRNTEVsZW1lbnQ+ID0gc2lnbmFsPEhUTUxFbGVtZW50PihudWxsKTtcclxuXHJcbiAgdmlld3BvcnRFbGVtZW50OiBTaWduYWw8SFRNTEVsZW1lbnQ+ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuY3VzdG9tVmlld3BvcnQoKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jdXN0b21WaWV3cG9ydCgpLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hbHRWaWV3cG9ydCgpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFsdFZpZXdwb3J0KCk7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB2aWV3cG9ydCBzZWxlY3RvciB3YXMgZGVmaW5lZCwgcXVlcnkgdGhlIGVsZW1lbnRcclxuICAgIGNvbnN0IHNlbGVjdG9yOiBzdHJpbmcgPSB0aGlzLmV4dGVybmFsVmlld3BvcnQoKTtcclxuICAgIHJldHVybiBzZWxlY3RvciA/IHRoaXMubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA6IG51bGw7XHJcbiAgfSk7XHJcblxyXG4gIHZpZXdwb3J0RXJyb3I6IFNpZ25hbDxzdHJpbmc+ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgcmV0dXJuICF0aGlzLnZpZXdwb3J0RWxlbWVudCgpXHJcbiAgICAgID8gYFtOZ1Njcm9sbGJhcl06IENvdWxkIG5vdCBmaW5kIHRoZSB2aWV3cG9ydCBlbGVtZW50IGZvciB0aGUgcHJvdmlkZWQgc2VsZWN0b3IgXCIkeyB0aGlzLmV4dGVybmFsVmlld3BvcnQoKSB9XCJgXHJcbiAgICAgIDogbnVsbDtcclxuICB9KTtcclxuXHJcbiAgY29udGVudFdyYXBwZXJFbGVtZW50OiBTaWduYWw8SFRNTEVsZW1lbnQ+ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuYWx0Q29udGVudFdyYXBwZXIoKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5hbHRDb250ZW50V3JhcHBlcigpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IHRoaXMuZXh0ZXJuYWxDb250ZW50V3JhcHBlcigpO1xyXG4gICAgcmV0dXJuIHNlbGVjdG9yID8gdGhpcy5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIDogbnVsbDtcclxuICB9KTtcclxuXHJcbiAgY29udGVudFdyYXBwZXJFcnJvcjogU2lnbmFsPHN0cmluZz4gPSBjb21wdXRlZCgoKSA9PiB7XHJcbiAgICByZXR1cm4gIXRoaXMuY29udGVudFdyYXBwZXJFbGVtZW50KCkgJiYgdGhpcy5leHRlcm5hbENvbnRlbnRXcmFwcGVyKClcclxuICAgICAgPyBgW05nU2Nyb2xsYmFyXTogQ29udGVudCB3cmFwcGVyIGVsZW1lbnQgbm90IGZvdW5kIGZvciB0aGUgcHJvdmlkZWQgc2VsZWN0b3IgXCIkeyB0aGlzLmV4dGVybmFsQ29udGVudFdyYXBwZXIoKSB9XCJgXHJcbiAgICAgIDogbnVsbDtcclxuICB9KTtcclxuXHJcbiAgc3BhY2VyRWxlbWVudDogU2lnbmFsPEhUTUxFbGVtZW50PiA9IGNvbXB1dGVkKCgpID0+IHtcclxuICAgIGlmICh0aGlzLmFsdFNwYWNlcigpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFsdFNwYWNlcigpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IHRoaXMuZXh0ZXJuYWxTcGFjZXIoKTtcclxuICAgIHJldHVybiBzZWxlY3RvciA/IHRoaXMubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSA6IG51bGxcclxuICB9KTtcclxuXHJcbiAgc3BhY2VyRXJyb3I6IFNpZ25hbDxzdHJpbmc+ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgcmV0dXJuICF0aGlzLnNwYWNlckVsZW1lbnQoKSAmJiB0aGlzLmV4dGVybmFsU3BhY2VyKClcclxuICAgICAgPyBgW05nU2Nyb2xsYmFyXTogU3BhY2VyIGVsZW1lbnQgbm90IGZvdW5kIGZvciB0aGUgcHJvdmlkZWQgc2VsZWN0b3IgXCIkeyB0aGlzLmV4dGVybmFsU3BhY2VyKCkgfVwiYFxyXG4gICAgICA6IG51bGw7XHJcbiAgfSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFNraXAgaW5pdGlhbGl6aW5nIHRoZSB2aWV3cG9ydCBhbmQgdGhlIHNjcm9sbGJhclxyXG4gICAqIHRoaXMgaXMgdXNlZCB3aGVuIHRoZSBjb21wb25lbnQgbmVlZHMgdG8gd2FpdCBmb3IgM3JkIHBhcnR5IGxpYnJhcnkgdG8gcmVuZGVyXHJcbiAgICovXHJcbiAgQElucHV0KHsgdHJhbnNmb3JtOiBib29sZWFuQXR0cmlidXRlIH0pIHNraXBJbml0OiBib29sZWFuO1xyXG5cclxuICAvKipcclxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIGV4dGVybmFsIHZpZXdwb3J0IGRpcmVjdGl2ZSBpZiB1c2VkXHJcbiAgICovXHJcbiAgY3VzdG9tVmlld3BvcnQ6IFNpZ25hbDxTY3JvbGxWaWV3cG9ydD4gPSBjb250ZW50Q2hpbGQoU2Nyb2xsVmlld3BvcnQsIHsgZGVzY2VuZGFudHM6IHRydWUgfSk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgZWZmZWN0KChvbkNsZWFudXA6IEVmZmVjdENsZWFudXBSZWdpc3RlckZuKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGlzLnZpZXdwb3J0RWxlbWVudCgpO1xyXG4gICAgICBjb25zdCBzcGFjZXJFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoaXMuc3BhY2VyRWxlbWVudCgpO1xyXG4gICAgICBsZXQgY29udGVudFdyYXBwZXJFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoaXMuY29udGVudFdyYXBwZXJFbGVtZW50KCk7XHJcblxyXG4gICAgICBjb25zdCB2aWV3cG9ydEVycm9yOiBzdHJpbmcgPSB0aGlzLnZpZXdwb3J0RXJyb3IoKTtcclxuICAgICAgY29uc3QgY29udGVudFdyYXBwZXJFcnJvcjogc3RyaW5nID0gdGhpcy5jb250ZW50V3JhcHBlckVycm9yKCk7XHJcbiAgICAgIGNvbnN0IHNwYWNlckVycm9yOiBzdHJpbmcgPSB0aGlzLnNwYWNlckVycm9yKCk7XHJcblxyXG4gICAgICB1bnRyYWNrZWQoKCkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5za2lwSW5pdCkge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3I6IHN0cmluZyA9IHZpZXdwb3J0RXJyb3IgfHwgY29udGVudFdyYXBwZXJFcnJvciB8fCBzcGFjZXJFcnJvcjtcclxuICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGV4dGVybmFsIHNwYWNlciBvciBjb250ZW50IHdyYXBwZXIgaXMgcHJvdmlkZWQsIGNyZWF0ZSBhIGNvbnRlbnQgd3JhcHBlciBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmICghc3BhY2VyRWxlbWVudCAmJiAhY29udGVudFdyYXBwZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgY29udGVudFdyYXBwZXJFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gTW92ZSBhbGwgY29udGVudCBvZiB0aGUgdmlld3BvcnQgaW50byB0aGUgY29udGVudCB3cmFwcGVyXHJcbiAgICAgICAgICAgICAgY29uc3QgY2hpbGROb2RlczogQ2hpbGROb2RlW10gPSBBcnJheS5mcm9tKHZpZXdwb3J0RWxlbWVudC5jaGlsZE5vZGVzKTtcclxuICAgICAgICAgICAgICBjaGlsZE5vZGVzLmZvckVhY2goKG5vZGU6IENoaWxkTm9kZSkgPT4gdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZChjb250ZW50V3JhcHBlckVsZW1lbnQsIG5vZGUpKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBjb250ZW50IHdyYXBwZXIgdG8gdGhlIHZpZXdwb3J0XHJcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh2aWV3cG9ydEVsZW1lbnQsIGNvbnRlbnRXcmFwcGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBjb250ZW50IHdyYXBwZXIgZWxlbWVudCBpcyBkZWZpbmVkIHRvIHByb2NlZWRcclxuICAgICAgICAgICAgaWYgKGNvbnRlbnRXcmFwcGVyRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdmlld3BvcnRcclxuICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmluaXQodmlld3BvcnRFbGVtZW50LCBjb250ZW50V3JhcHBlckVsZW1lbnQsIHNwYWNlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgIC8vIEF0dGFjaCBzY3JvbGxiYXJzXHJcbiAgICAgICAgICAgICAgdGhpcy5fYXR0YWNoU2Nyb2xsYmFycygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvbkNsZWFudXAoKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbGJhcnNSZWYpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBSZWYuZGV0YWNoVmlldyh0aGlzLl9zY3JvbGxiYXJzUmVmLmhvc3RWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsYmFyc1JlZi5kZXN0cm95KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBfYXR0YWNoU2Nyb2xsYmFycygpOiB2b2lkIHtcclxuICAgIC8vIENyZWF0ZSB0aGUgc2Nyb2xsYmFycyBjb21wb25lbnRcclxuICAgIHRoaXMuX3Njcm9sbGJhcnNSZWYgPSBjcmVhdGVDb21wb25lbnQoU2Nyb2xsYmFycywge1xyXG4gICAgICBlbnZpcm9ubWVudEluamVjdG9yOiB0aGlzLmFwcFJlZi5pbmplY3RvcixcclxuICAgICAgZWxlbWVudEluamVjdG9yOiBJbmplY3Rvci5jcmVhdGUoeyBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5HX1NDUk9MTEJBUiwgdXNlVmFsdWU6IHRoaXMgfV0gfSlcclxuICAgIH0pO1xyXG4gICAgLy8gQXR0YWNoIHNjcm9sbGJhciB0byB0aGUgY29udGVudCB3cmFwcGVyXHJcbiAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHRoaXMudmlld3BvcnQuY29udGVudFdyYXBwZXJFbGVtZW50LCB0aGlzLl9zY3JvbGxiYXJzUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQpXHJcbiAgICAvLyBBdHRhY2ggdGhlIGhvc3QgdmlldyBvZiB0aGUgY29tcG9uZW50IHRvIHRoZSBtYWluIGNoYW5nZSBkZXRlY3Rpb24gdHJlZSwgc28gdGhhdCBpdHMgbGlmZWN5Y2xlIGhvb2tzIHJ1bi5cclxuICAgIHRoaXMuYXBwUmVmLmF0dGFjaFZpZXcodGhpcy5fc2Nyb2xsYmFyc1JlZi5ob3N0Vmlldyk7XHJcbiAgICAvLyBTZXQgdGhlIHNjcm9sbGJhcnMgaW5zdGFuY2VcclxuICAgIHRoaXMuX3Njcm9sbGJhcnMuc2V0KHRoaXMuX3Njcm9sbGJhcnNSZWYuaW5zdGFuY2UpO1xyXG4gIH1cclxufVxyXG4iXX0=